<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>Page Title</title>
<style>
    #id_drop {
        width: 300px;
        height: 300px;
        border: 1px solid pink;
        /* 항상 영역나누기 할 땐 일단 border 를 설정, 나중에 주석처리하며 그만*/
    }
</style>
</head>
<body>
    <div id="id_drop" ondragover="f_over()" ondrop="f_drop()">
        여기에 파일을 끌어다 놓으세용
    </div>
<script>
    // 이 파일을 잘 가지고 있다가 사용합니다.
    // 거의 이렇게밖에 사용하지 않으니

     var v_div = document.querySelector('#id_drop');
    // 외부파일 끌어다 놓을 시, 브라우저가 읽을 수 있는 파일은 자동으로
    // 읽기 때문에 막아야 하는데, dragover, drop 두 이벤트를 막아야 함.
    function f_over(){
        // event.stopPropagation(); // 이벤트 버블링을 이벤트 캡쳐링으로
        event.preventDefault(); // 기본 장착이벤트 기능 막기
    }

    // 파일 1개씩 읽는 함수
    // 비동기를 별도함수로 만들어서 개별처리
    function f_fileRead(p_file){
        var v_fileReader = new FileReader();
        // 읽는 게 너무 짧으면 이벤트 등록이 제대로 안 먹을 수가 있어서
        // 보통 먼저 등록해줌
        v_fileReader.onload = function() { // 다 읽으면 자동으로 이벤트 발생
            // v_div.innerHTML = ""; // div 내용 Clear;
            console.log(v_fileReader.result); // 읽은 결과는 result 속성에 담아 줌
            var v_img = document.createElement("img"); /* $("<img>") */
            v_img.src = v_fileReader.result;
            v_img.width = 100;
            v_img.height = 100;
            v_div.appendChild(v_img); // 문서에 추가 해줘야지만 눈에 띄넨
        
         }
        v_fileReader.readAsDataURL(p_file); // 이미지는 이걸로, 텍스트는 readAsBinaryString() 이걸로 파일 읽으로 지시
        // 다 읽고서 해라 하고 지시하지 않고 순서로 만듬.
        // 다 읽고 읽어와라
    }

    function f_drop(){
        event.preventDefault();
        // 요기서 원하는 것 처리
        var v_fileList = event.dataTransfer.files;
        for(var i = 0; i < v_fileList.length; i++) {
            f_fileRead(v_fileList[i]);
        }
    }

    // div 밖에다 가져다 놓는 것도 막아야 함.
    window.addEventListener("dragover", function(){
        event.preventDefault();
    });
    window.addEventListener("drop", function(){
        event.preventDefault();
    });
</script>
</body>
</html>